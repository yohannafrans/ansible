---
- name: Deploy ELK using Docker Swarm
  hosts: target
  become: yes
  tasks:
  - name: Deploy ELK from a compose file
    docker_stack:
      state: present
      name: logging
      compose:
        - /root/secondphasefinalproject/logging/docker-compose.yml
  - name: Increase vm.max_map_count on elasticsearch nodes
    shell: sysctl -w vm.max_map_count=262144